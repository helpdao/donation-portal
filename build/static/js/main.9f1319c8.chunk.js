(this.webpackJsonpsquads=this.webpackJsonpsquads||[]).push([[5],{26:function(e){e.exports=JSON.parse('{"a":"rinkeby","b":{"rinkeby":{"chainId":4,"fortmatic":"pk_test_701389F30161C509","templateFactory":"0xd0798582fb6d2a2e7fdb562868e28798d59d0c48","agentAppId":"0x9ac98dc5f995bf0211ed589ef022719d1487e5cb2bab505676f0d084c07cf89a"},"mainnet":{"chainId":1,"fortmatic":"pk_live_6A088B7CE1848C16","templateFactory":"0xab5a11b8ad1276e8d079a771fc8eaa17fb3d263d"}}}')},301:function(e,t,a){e.exports=a.p+"static/media/signup.5ea92939.svg"},314:function(e){e.exports=JSON.parse('[{"constant":false,"inputs":[{"name":"_initialSupervisor","type":"address"}],"name":"createDao","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"inputs":[{"name":"_daoFactory","type":"address"},{"name":"_ens","type":"address"},{"name":"_miniMeFactory","type":"address"},{"name":"_aragonID","type":"address"}],"payable":false,"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":false,"name":"dao","type":"address"}],"name":"DeployDao","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"name":"dao","type":"address"}],"name":"SetupDao","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"name":"token","type":"address"}],"name":"DeployToken","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"name":"appProxy","type":"address"},{"indexed":false,"name":"appId","type":"bytes32"}],"name":"InstalledApp","type":"event"}]')},315:function(e,t,a){e.exports=a.p+"static/media/help.80863a23.svg"},318:function(e,t,a){e.exports=a.p+"static/media/write.2f687b68.svg"},332:function(e,t,a){e.exports=a.p+"static/media/help_dao_min.85497afa.svg"},340:function(e,t,a){e.exports=a(735)},345:function(e,t,a){},733:function(e,t,a){},735:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(8),o=a.n(c),l=(a(345),a(82)),s=a(74),i=(a(86),a(22)),u=a(3),m=a.n(u),d=a(13),p=a(11),f=(a(347),a(208)),h=a(102),E=(a(62),a(10)),b=(a(75),a(16)),y=(a(350),a(312)),g=(a(126),a(58)),v=a(301),w=a.n(v),x=g.a.Title,k=function(e){var t=e.onFinish,a=Object(h.b)();return r.a.createElement(r.a.Fragment,null,r.a.createElement(E.a,{xs:24,sm:12},r.a.createElement(x,{level:3},"Register"),r.a.createElement("p",null,"In order to launch a help squad, you will need to sign up. You can use your email or phone number."),a.connected?t():null!==a.activating?r.a.createElement(y.a,{size:"large"}):r.a.createElement(b.a,{type:"primary",onClick:function(){return a.activate("fortmatic")}},"Register")),r.a.createElement(E.a,{xs:0,sm:12},r.a.createElement("img",{src:w.a,style:{width:"100%"}})))},O=a(313),j=a.n(O),S=a(120),A=a(26),I=a(314),q=function(){var e=Object(d.a)(m.a.mark((function e(t,a){var n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new Promise((function(e,n){var r=t.filters.DeployDao();t.on(r,(function(t,n){n.transactionHash===a&&e(t)}))})),r=new Promise((function(e,n){var r=t.filters.InstalledApp();t.on(r,(function(t,n,r){r.transactionHash===a&&n===A.b[A.a].agentAppId&&e(t)}))})),e.abrupt("return",Promise.all([n,r]));case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),C=function(){var e=Object(d.a)(m.a.mark((function e(t){var a,n,r,c,o,l,s,i,u,d;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.creator,n=t.web3provider,r=new S.ethers.providers.Web3Provider(n),c=r.getSigner(),o=new S.ethers.Contract(A.b[A.a].templateFactory,I,c),e.next=6,o.createDao(a);case 6:return l=e.sent,e.next=9,q(o,l.hash);case 9:return s=e.sent,i=Object(p.a)(s,2),u=i[0],d=i[1],e.abrupt("return",{daoAddress:u,agentAddress:d});case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=a(315),_=a.n(T),D=g.a.Title,F=function(e){var t=e.onFinish,a=Object(h.b)(),c=new j.a(A.b[A.a].fortmatic),o=Object(n.useState)(0),l=Object(p.a)(o,2),s=(l[0],l[1]);window.setBalance=s;var i=function(){var e=Object(d.a)(m.a.mark((function e(){var n,r,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C({creator:a.account,web3provider:a.ethereum});case 2:n=e.sent,r=n.daoAddress,c=n.agentAddress,t({daoAddress:r,agentAddress:c});case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(E.a,{xs:24,sm:12},r.a.createElement(D,{level:3},"Launch"),r.a.createElement("p",null,"To launch a help squad, a $20 deposit is needed.",r.a.createElement("br",null),"This is because of our payment providers.",r.a.createElement("br",null),"It will cost around $5 in network fees to launch the help squad.",r.a.createElement("br",null),r.a.createElement("b",null,"The rest will be deposited directly on your own help squad, so you will be its first donor!")),parseFloat(S.ethers.utils.formatEther(a.balance))<.05?r.a.createElement(b.a,{type:"primary",onClick:function(){return c.user.deposit()}},"Deposit $20"):r.a.createElement(b.a,{type:"primary",onClick:function(){return i()}},"Launch help squad")),r.a.createElement(E.a,{xs:0,sm:12},r.a.createElement("img",{src:_.a,style:{width:"100%"}})))},R=(a(420),a(105)),P=(a(217),a(209)),L=a(158),B=a(316),N=a.n(B),z=a(317),H=(a(515),a(318)),M=a.n(H),W=function(e){var t=e.onFinish,a=Object(n.useState)(L.EditorState.createEmpty()),c=Object(p.a)(a,2),o=c[0],l=c[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(E.a,{xs:24,sm:24,md:12},r.a.createElement(R.a,{name:"new",onFinish:function(e){var a=Object(L.convertToRaw)(o.getCurrentContent()),n=N()(a);e.description=n,t(e)},layout:"vertical"},r.a.createElement(R.a.Item,{label:"Squad name",name:"name",rules:[{required:!0,message:"Please write a name!"}]},r.a.createElement(P.a,null)),r.a.createElement(R.a.Item,{label:"Squad chat link",name:"inviteLink",rules:[{required:!0,message:"Please write a link!"},{type:"url",message:"Please write a valid link!"}]},r.a.createElement(P.a,null)),r.a.createElement(R.a.Item,{label:"Squad description",name:"description"},r.a.createElement(z.Editor,{editorState:o,toolbarClassName:"toolbarClassName",wrapperClassName:"wrapperClassName",editorClassName:"editorClassName",onEditorStateChange:l,toolbarStyle:{border:"none"},wrapperStyle:{border:"1px solid #d9d9d9",borderRadius:2},editorStyle:{minHeight:"10rem",padding:"0px 16px"},toolbar:{options:["inline","blockType","list","colorPicker","link","remove"]}})),r.a.createElement(R.a.Item,null,r.a.createElement(b.a,{type:"primary",htmlType:"submit"},"Done")))),r.a.createElement(E.a,{xs:0,sm:0,md:12},r.a.createElement("img",{src:M.a,style:{width:"100%"}})))},U=Object({NODE_ENV:"production",PUBLIC_URL:"/donation-portal",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).API_URL||"https://testbackend.helpdao.org",J=a(85),V=a.n(J),$=U+"/squad";function K(e){return new Promise((function(t,a){V.a.get("".concat($,"/").concat(e)).then((function(e){t(e)})).catch((function(e){return a(e)}))}))}function Y(e){return new Promise((function(t,a){console.log("MANDAMOS:"),console.log(e),V.a.post("".concat($,"/new"),e).then((function(e){t(e)})).catch((function(e){return a(e)}))}))}var G=f.a.Step;function Q(){var e=Object(n.useState)(0),t=Object(p.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(""),l=Object(p.a)(o,2),s=l[0],u=(l[1],Object(n.useState)({})),E=Object(p.a)(u,2),b=E[0],y=E[1],g=Object(n.useState)({}),v=Object(p.a)(g,2),w=(v[0],v[1]),x=function(){c(a+1)},O=function(){var e=Object(d.a)(m.a.mark((function e(t){var a,n,r,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.daoAddress,n=t.agentAddress,w({daoAddress:a,agentAddress:n}),r={name:b.name,description:b.description,inviteLink:b.inviteLink,daoAddress:a,donationAddress:n},e.next=5,Y(r);case 5:c=e.sent,window.location.replace("".concat(window.location.origin,"/squad/").concat(c.data.newSquad._id,"?launched=true"));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=[{title:"Register",content:r.a.createElement(k,{onFinish:x})},{title:"Enter details",content:r.a.createElement(W,{onFinish:function(e){y(e),x()}})},{title:"Launch",content:r.a.createElement(F,{onFinish:O})}];return r.a.createElement(h.a,{chainId:A.b[A.a].chainId,connectors:{fortmatic:{apiKey:A.b[A.a].fortmatic}}},r.a.createElement(f.a,{current:a,status:s,style:{marginTop:32,marginBottom:32}},j.map((function(e){return r.a.createElement(G,{key:e.title,title:e.title})}))),r.a.createElement("div",{className:"steps-content"},r.a.createElement(i.a,{gutter:64,justify:"space-around",align:"middle"},j[a].content)))}a(609);var X=a(335),Z=(a(611),a(210)),ee=(a(736),a(334)),te=(a(288),a(336)),ae=(a(289),a(163)),ne=(a(194),a(46)),re=a(161),ce=a.n(re),oe=a(756),le=a(755),se=a(754),ie=a(740),ue=a(741),me=a(742),de=a(743),pe=a(744),fe=a(745),he=a(746),Ee=a(747),be=a(748),ye=a(749),ge=a(750),ve=a(751),we=a(752),xe=a(753),ke=function(e){return r.a.createElement("div",{style:{marginTop:16,marginBottom:16}},r.a.createElement(ie.a,{url:window.location.href,style:{marginRight:8}},r.a.createElement(ue.a,{size:32,round:!0})),r.a.createElement(me.a,{url:window.location.href,style:{marginRight:8}},r.a.createElement(de.a,{size:32,round:!0})),r.a.createElement(pe.a,{url:window.location.href,style:{marginRight:8}},r.a.createElement(fe.a,{size:32,round:!0})),r.a.createElement(he.a,{url:window.location.href,style:{marginRight:8}},r.a.createElement(Ee.a,{size:32,round:!0})),r.a.createElement(be.a,{url:window.location.href,style:{marginRight:8}},r.a.createElement(ye.a,{size:32,round:!0})),r.a.createElement(ge.a,{url:window.location.href,style:{marginRight:8}},r.a.createElement(ve.a,{size:32,round:!0})),r.a.createElement(we.a,{url:window.location.href,style:{marginRight:8}},r.a.createElement(xe.a,{size:32,round:!0})))},Oe=g.a.Text,je=g.a.Title,Se=function(e){var t=e.match.params.squadId,a=Object(n.useState)({}),c=Object(p.a)(a,2),o=c[0],l=c[1],s=Object(n.useState)(0),u=Object(p.a)(s,2),f=u[0],h=u[1],y=Object(n.useState)(!1),g=Object(p.a)(y,2),v=g[0],w=g[1],x=Object(n.useState)(!1),k=Object(p.a)(x,2),O=k[0],j=k[1];Object(n.useEffect)((function(){var e=new URLSearchParams(window.location.search);function a(){return(a=Object(d.a)(m.a.mark((function e(){var a,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,K(t);case 3:if(!(a=e.sent).data||!a.data.squad){e.next=10;break}return l(a.data.squad),e.next=8,S(a.data.squad.donationAddress);case 8:n=e.sent,h(n);case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})))).apply(this,arguments)}w("true"===e.get("donation")),j("true"===e.get("launched")),function(){a.apply(this,arguments)}()}),[t]);var S=function(){var e=Object(d.a)(m.a.mark((function e(t){var a,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.tokenbalance.com/token/".concat("0x6b175474e89094c44da98b954eedeac495271d0f","/").concat(t));case 2:return a=e.sent,e.next=5,a.json();case 5:return n=e.sent,e.abrupt("return",n.balance);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=r.a.createElement(ne.a,null,r.a.createElement(ne.a.Item,{key:"1"},r.a.createElement("a",{href:"https://pay.sendwyre.com/purchase?destCurrency=DAI&paymentMethod=debit-card&dest=".concat(o.donationAddress,"&redirectUrl=").concat(window.location.origin,"/squad/").concat(o._id,"?donation=true"),target:"_blank",rel:"noopener noreferrer"},r.a.createElement(oe.a,null),r.a.createElement(Oe,{strong:!0,style:{marginLeft:8}},"Credit and debit card"))),r.a.createElement(ne.a.Item,{key:"2"},r.a.createElement("a",{href:"https://buy.ramp.network?swapAsset=DAI&userAddress=".concat(o.donationAddress),target:"_blank",rel:"noopener noreferrer"},r.a.createElement(le.a,null),r.a.createElement(Oe,{strong:!0,style:{marginLeft:8}},"Bank account - \ud83c\uddea\ud83c\uddfa\ud83c\uddec\ud83c\udde7"))));return r.a.createElement(r.a.Fragment,null,r.a.createElement(ee.a,{onBack:function(){return document.location.href="/"},title:o.name,tags:o.verified?r.a.createElement(ae.a,{color:"green"},"Verified"):"",extra:[r.a.createElement(b.a,{href:o.inviteLink,target:"_blank",rel:"noopener noreferrer"},"Join the chat"),r.a.createElement(te.a,{overlay:I,placement:"bottomRight"},r.a.createElement(b.a,{type:"primary"},"Donate ",r.a.createElement(se.a,null)))],style:{padding:0}}),O?r.a.createElement(Z.a,{status:"success",title:"Help squad launched!",subTitle:"You have successfully launched ".concat(o.name,". This is your help squad's very own profile page. Share it now!"),extra:[r.a.createElement(ke,null),r.a.createElement(i.a,{justify:"center"},r.a.createElement(b.a,{type:"primary",key:"next"},"What's next?"))]}):"",v?r.a.createElement(Z.a,{status:"success",title:"Thanks for donating!",subTitle:"You have successfully donated to ".concat(o.name,". Thank you!")}):"",r.a.createElement(i.a,{style:{marginTop:32,marginBottom:32},gutter:64},r.a.createElement(E.a,{xs:{span:24,order:1},sm:{span:24,order:1},md:{span:16,order:0}},r.a.createElement(ce.a,{source:o.description}),O?"":r.a.createElement(r.a.Fragment,null,r.a.createElement(je,{level:3},"Share"),r.a.createElement(ke,null))),r.a.createElement(E.a,{xs:{span:24,order:0},sm:{span:24,order:0},md:{span:8,order:1},style:{textAlign:"right"}},r.a.createElement(X.a,{title:"Current balance",prefix:"$",value:f,precision:2,valueStyle:{color:"#3f8600"}}),r.a.createElement("a",{href:"https://".concat(A.a,".aragon.org/#/").concat(o.daoAddress),target:"_blank",rel:"noopener noreferrer"},"Check finances \u2192"))))},Ae=a(18),Ie=a(35),qe=a(20),Ce=a(21),Te=g.a.Title,_e=function(e){Object(qe.a)(a,e);var t=Object(Ce.a)(a);function a(){return Object(Ae.a)(this,a),t.apply(this,arguments)}return Object(Ie.a)(a,[{key:"render",value:function(){return r.a.createElement(i.a,{gutter:32,style:{paddingTop:64,paddingBottom:64}},r.a.createElement(E.a,{span:14},r.a.createElement(Te,{level:2},"Grassroots help for vulnerable groups in COVID-19."),r.a.createElement(Te,{level:4,type:"secondary"},"Discover local squads that help those who need it the most in the current COVID-19 pandemic.")),r.a.createElement(E.a,{span:10},r.a.createElement("img",{src:"https://uploads-ssl.webflow.com/5e750e8eafbf2f39a4236fe3/5e751a47a06260604764bb02_Frame%201-p-2000.png",style:{width:"100%",borderRadius:16}})))}}]),a}(r.a.Component),De=(a(737),a(333));function Fe(e){var t=e.name,a=e.desc,n=e.url,c=e.verified;return r.a.createElement(De.a,{actions:[r.a.createElement(l.b,{to:n},r.a.createElement(b.a,{type:"primary"},"Read more \u2192"))],title:r.a.createElement(r.a.Fragment,null,t,c?r.a.createElement(ae.a,{color:"green",style:{float:"right"}},"Verified"):"")},r.a.createElement("div",{style:{height:164}},r.a.createElement(ce.a,{source:a.substring(0,180).replace(/([\#])+/g,"")})))}var Re=function(e){var t=Object(n.useState)([]),a=Object(p.a)(t,2),c=a[0],o=a[1],l=function(){var e=Object(d.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,new Promise((function(e,t){V.a.get("".concat($,"/all")).then((function(t){e(t)})).catch((function(e){return t(e)}))}));case 3:(t=e.sent).data.squads.length>0&&o(t.data.squads),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){l()}),[]),r.a.createElement("div",null,r.a.createElement(i.a,{gutter:[16,16]},r.a.createElement("h2",{style:{textAlign:"center",marginTop:32}},"HELP SQUADS")),r.a.createElement(i.a,{gutter:[16,16]},c.map((function(e){return r.a.createElement(E.a,{xs:24,sm:12,lg:8},r.a.createElement(Fe,{name:e.name,desc:e.description,url:"/squad/"+e._id,verified:e.verified}))}))))},Pe=a(332),Le=a.n(Pe),Be=function(e){Object(qe.a)(a,e);var t=Object(Ce.a)(a);function a(){return Object(Ae.a)(this,a),t.apply(this,arguments)}return Object(Ie.a)(a,[{key:"render",value:function(){return r.a.createElement(ne.a,{mode:"horizontal",style:{borderBottom:"none",paddingTop:16}},r.a.createElement(ne.a.Item,{key:"home",style:{float:"left",borderBottom:"none",paddingLeft:12}},r.a.createElement(l.b,{to:"/"},r.a.createElement("img",{src:Le.a,className:"img-fluid d-inline-block align-top",alt:"",style:{height:48}}))),r.a.createElement(ne.a.Item,{key:"about",style:{float:"right"}},r.a.createElement("a",{href:"https://helpdao.org/",target:"_blank"},"About")),r.a.createElement(ne.a.Item,{key:"new",style:{float:"right"}},r.a.createElement(l.b,{to:"/new"},"Launch a help squad")))}}]),a}(r.a.Component),Ne=function(e){Object(qe.a)(a,e);var t=Object(Ce.a)(a);function a(){return Object(Ae.a)(this,a),t.apply(this,arguments)}return Object(Ie.a)(a,[{key:"render",value:function(){return r.a.createElement(i.a,{style:{borderBottom:"none"}},r.a.createElement(E.a,{sm:{span:24},md:{span:20,offset:2},lg:{span:16,offset:4},xl:{span:12,offset:6}},r.a.createElement(Be,null),r.a.createElement("div",{style:{margin:16}},this.props.children)))}}]),a}(r.a.Component);a(733),a(734);var ze=function(){return r.a.createElement(l.a,null,r.a.createElement(s.c,null,r.a.createElement(Ne,null,r.a.createElement(s.a,{exact:!0,path:"/"},r.a.createElement(_e,null),r.a.createElement(Re,null)),r.a.createElement(s.a,{exact:!0,path:"/new"},r.a.createElement(Q,null)),r.a.createElement(s.a,{exact:!0,path:"/new/register"},r.a.createElement(k,null)),r.a.createElement(s.a,{path:"/squad/:squadId",component:Se}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(ze,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[340,6,7]]]);
//# sourceMappingURL=main.9f1319c8.chunk.js.map